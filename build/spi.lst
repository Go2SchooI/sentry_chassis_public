ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"spi.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.MX_SPI1_Init,"ax",%progbits
  20              		.align	1
  21              		.global	MX_SPI1_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	MX_SPI1_Init:
  27              	.LFB130:
  28              		.file 1 "Src/spi.c"
   1:Src/spi.c     **** /**
   2:Src/spi.c     ****   ******************************************************************************
   3:Src/spi.c     ****   * File Name          : SPI.c
   4:Src/spi.c     ****   * Description        : This file provides code for the configuration
   5:Src/spi.c     ****   *                      of the SPI instances.
   6:Src/spi.c     ****   ******************************************************************************
   7:Src/spi.c     ****   * @attention
   8:Src/spi.c     ****   *
   9:Src/spi.c     ****   * <h2><center>&copy; Copyright (c) 2022 STMicroelectronics.
  10:Src/spi.c     ****   * All rights reserved.</center></h2>
  11:Src/spi.c     ****   *
  12:Src/spi.c     ****   * This software component is licensed by ST under Ultimate Liberty license
  13:Src/spi.c     ****   * SLA0044, the "License"; You may not use this file except in compliance with
  14:Src/spi.c     ****   * the License. You may obtain a copy of the License at:
  15:Src/spi.c     ****   *                             www.st.com/SLA0044
  16:Src/spi.c     ****   *
  17:Src/spi.c     ****   ******************************************************************************
  18:Src/spi.c     ****   */
  19:Src/spi.c     **** 
  20:Src/spi.c     **** /* Includes ------------------------------------------------------------------*/
  21:Src/spi.c     **** #include "spi.h"
  22:Src/spi.c     **** 
  23:Src/spi.c     **** /* USER CODE BEGIN 0 */
  24:Src/spi.c     **** 
  25:Src/spi.c     **** /* USER CODE END 0 */
  26:Src/spi.c     **** 
  27:Src/spi.c     **** SPI_HandleTypeDef hspi1;
  28:Src/spi.c     **** SPI_HandleTypeDef hspi2;
  29:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_rx;
  30:Src/spi.c     **** DMA_HandleTypeDef hdma_spi1_tx;
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 2


  31:Src/spi.c     **** 
  32:Src/spi.c     **** /* SPI1 init function */
  33:Src/spi.c     **** void MX_SPI1_Init(void)
  34:Src/spi.c     **** {
  29              		.loc 1 34 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  35:Src/spi.c     **** 
  36:Src/spi.c     ****   hspi1.Instance = SPI1;
  38              		.loc 1 36 3 view .LVU1
  39              		.loc 1 36 18 is_stmt 0 view .LVU2
  40 0002 0F48     		ldr	r0, .L5
  41 0004 0F4B     		ldr	r3, .L5+4
  42 0006 0360     		str	r3, [r0]
  37:Src/spi.c     ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  43              		.loc 1 37 3 is_stmt 1 view .LVU3
  44              		.loc 1 37 19 is_stmt 0 view .LVU4
  45 0008 4FF48273 		mov	r3, #260
  46 000c 4360     		str	r3, [r0, #4]
  38:Src/spi.c     ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  47              		.loc 1 38 3 is_stmt 1 view .LVU5
  48              		.loc 1 38 24 is_stmt 0 view .LVU6
  49 000e 0023     		movs	r3, #0
  50 0010 8360     		str	r3, [r0, #8]
  39:Src/spi.c     ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  51              		.loc 1 39 3 is_stmt 1 view .LVU7
  52              		.loc 1 39 23 is_stmt 0 view .LVU8
  53 0012 C360     		str	r3, [r0, #12]
  40:Src/spi.c     ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
  54              		.loc 1 40 3 is_stmt 1 view .LVU9
  55              		.loc 1 40 26 is_stmt 0 view .LVU10
  56 0014 0222     		movs	r2, #2
  57 0016 0261     		str	r2, [r0, #16]
  41:Src/spi.c     ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
  58              		.loc 1 41 3 is_stmt 1 view .LVU11
  59              		.loc 1 41 23 is_stmt 0 view .LVU12
  60 0018 0122     		movs	r2, #1
  61 001a 4261     		str	r2, [r0, #20]
  42:Src/spi.c     ****   hspi1.Init.NSS = SPI_NSS_SOFT;
  62              		.loc 1 42 3 is_stmt 1 view .LVU13
  63              		.loc 1 42 18 is_stmt 0 view .LVU14
  64 001c 4FF40072 		mov	r2, #512
  65 0020 8261     		str	r2, [r0, #24]
  43:Src/spi.c     ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_8;
  66              		.loc 1 43 3 is_stmt 1 view .LVU15
  67              		.loc 1 43 32 is_stmt 0 view .LVU16
  68 0022 1022     		movs	r2, #16
  69 0024 C261     		str	r2, [r0, #28]
  44:Src/spi.c     ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  70              		.loc 1 44 3 is_stmt 1 view .LVU17
  71              		.loc 1 44 23 is_stmt 0 view .LVU18
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 3


  72 0026 0362     		str	r3, [r0, #32]
  45:Src/spi.c     ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
  73              		.loc 1 45 3 is_stmt 1 view .LVU19
  74              		.loc 1 45 21 is_stmt 0 view .LVU20
  75 0028 4362     		str	r3, [r0, #36]
  46:Src/spi.c     ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  76              		.loc 1 46 3 is_stmt 1 view .LVU21
  77              		.loc 1 46 29 is_stmt 0 view .LVU22
  78 002a 8362     		str	r3, [r0, #40]
  47:Src/spi.c     ****   hspi1.Init.CRCPolynomial = 10;
  79              		.loc 1 47 3 is_stmt 1 view .LVU23
  80              		.loc 1 47 28 is_stmt 0 view .LVU24
  81 002c 0A23     		movs	r3, #10
  82 002e C362     		str	r3, [r0, #44]
  48:Src/spi.c     ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
  83              		.loc 1 48 3 is_stmt 1 view .LVU25
  84              		.loc 1 48 7 is_stmt 0 view .LVU26
  85 0030 FFF7FEFF 		bl	HAL_SPI_Init
  86              	.LVL0:
  87              		.loc 1 48 6 view .LVU27
  88 0034 00B9     		cbnz	r0, .L4
  89              	.L1:
  49:Src/spi.c     ****   {
  50:Src/spi.c     ****     Error_Handler();
  51:Src/spi.c     ****   }
  52:Src/spi.c     **** 
  53:Src/spi.c     **** }
  90              		.loc 1 53 1 view .LVU28
  91 0036 08BD     		pop	{r3, pc}
  92              	.L4:
  50:Src/spi.c     ****   }
  93              		.loc 1 50 5 is_stmt 1 view .LVU29
  94 0038 FFF7FEFF 		bl	Error_Handler
  95              	.LVL1:
  96              		.loc 1 53 1 is_stmt 0 view .LVU30
  97 003c FBE7     		b	.L1
  98              	.L6:
  99 003e 00BF     		.align	2
 100              	.L5:
 101 0040 00000000 		.word	.LANCHOR0
 102 0044 00300140 		.word	1073819648
 103              		.cfi_endproc
 104              	.LFE130:
 106              		.section	.text.MX_SPI2_Init,"ax",%progbits
 107              		.align	1
 108              		.global	MX_SPI2_Init
 109              		.syntax unified
 110              		.thumb
 111              		.thumb_func
 113              	MX_SPI2_Init:
 114              	.LFB131:
  54:Src/spi.c     **** /* SPI2 init function */
  55:Src/spi.c     **** void MX_SPI2_Init(void)
  56:Src/spi.c     **** {
 115              		.loc 1 56 1 is_stmt 1 view -0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 4


 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119 0000 08B5     		push	{r3, lr}
 120              	.LCFI1:
 121              		.cfi_def_cfa_offset 8
 122              		.cfi_offset 3, -8
 123              		.cfi_offset 14, -4
  57:Src/spi.c     **** 
  58:Src/spi.c     ****   hspi2.Instance = SPI2;
 124              		.loc 1 58 3 view .LVU32
 125              		.loc 1 58 18 is_stmt 0 view .LVU33
 126 0002 0F48     		ldr	r0, .L11
 127 0004 0F4B     		ldr	r3, .L11+4
 128 0006 0360     		str	r3, [r0]
  59:Src/spi.c     ****   hspi2.Init.Mode = SPI_MODE_MASTER;
 129              		.loc 1 59 3 is_stmt 1 view .LVU34
 130              		.loc 1 59 19 is_stmt 0 view .LVU35
 131 0008 4FF48273 		mov	r3, #260
 132 000c 4360     		str	r3, [r0, #4]
  60:Src/spi.c     ****   hspi2.Init.Direction = SPI_DIRECTION_2LINES;
 133              		.loc 1 60 3 is_stmt 1 view .LVU36
 134              		.loc 1 60 24 is_stmt 0 view .LVU37
 135 000e 0023     		movs	r3, #0
 136 0010 8360     		str	r3, [r0, #8]
  61:Src/spi.c     ****   hspi2.Init.DataSize = SPI_DATASIZE_8BIT;
 137              		.loc 1 61 3 is_stmt 1 view .LVU38
 138              		.loc 1 61 23 is_stmt 0 view .LVU39
 139 0012 C360     		str	r3, [r0, #12]
  62:Src/spi.c     ****   hspi2.Init.CLKPolarity = SPI_POLARITY_HIGH;
 140              		.loc 1 62 3 is_stmt 1 view .LVU40
 141              		.loc 1 62 26 is_stmt 0 view .LVU41
 142 0014 0222     		movs	r2, #2
 143 0016 0261     		str	r2, [r0, #16]
  63:Src/spi.c     ****   hspi2.Init.CLKPhase = SPI_PHASE_2EDGE;
 144              		.loc 1 63 3 is_stmt 1 view .LVU42
 145              		.loc 1 63 23 is_stmt 0 view .LVU43
 146 0018 0122     		movs	r2, #1
 147 001a 4261     		str	r2, [r0, #20]
  64:Src/spi.c     ****   hspi2.Init.NSS = SPI_NSS_SOFT;
 148              		.loc 1 64 3 is_stmt 1 view .LVU44
 149              		.loc 1 64 18 is_stmt 0 view .LVU45
 150 001c 4FF40072 		mov	r2, #512
 151 0020 8261     		str	r2, [r0, #24]
  65:Src/spi.c     ****   hspi2.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 152              		.loc 1 65 3 is_stmt 1 view .LVU46
 153              		.loc 1 65 32 is_stmt 0 view .LVU47
 154 0022 0822     		movs	r2, #8
 155 0024 C261     		str	r2, [r0, #28]
  66:Src/spi.c     ****   hspi2.Init.FirstBit = SPI_FIRSTBIT_MSB;
 156              		.loc 1 66 3 is_stmt 1 view .LVU48
 157              		.loc 1 66 23 is_stmt 0 view .LVU49
 158 0026 0362     		str	r3, [r0, #32]
  67:Src/spi.c     ****   hspi2.Init.TIMode = SPI_TIMODE_DISABLE;
 159              		.loc 1 67 3 is_stmt 1 view .LVU50
 160              		.loc 1 67 21 is_stmt 0 view .LVU51
 161 0028 4362     		str	r3, [r0, #36]
  68:Src/spi.c     ****   hspi2.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 162              		.loc 1 68 3 is_stmt 1 view .LVU52
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 5


 163              		.loc 1 68 29 is_stmt 0 view .LVU53
 164 002a 8362     		str	r3, [r0, #40]
  69:Src/spi.c     ****   hspi2.Init.CRCPolynomial = 10;
 165              		.loc 1 69 3 is_stmt 1 view .LVU54
 166              		.loc 1 69 28 is_stmt 0 view .LVU55
 167 002c 0A23     		movs	r3, #10
 168 002e C362     		str	r3, [r0, #44]
  70:Src/spi.c     ****   if (HAL_SPI_Init(&hspi2) != HAL_OK)
 169              		.loc 1 70 3 is_stmt 1 view .LVU56
 170              		.loc 1 70 7 is_stmt 0 view .LVU57
 171 0030 FFF7FEFF 		bl	HAL_SPI_Init
 172              	.LVL2:
 173              		.loc 1 70 6 view .LVU58
 174 0034 00B9     		cbnz	r0, .L10
 175              	.L7:
  71:Src/spi.c     ****   {
  72:Src/spi.c     ****     Error_Handler();
  73:Src/spi.c     ****   }
  74:Src/spi.c     **** 
  75:Src/spi.c     **** }
 176              		.loc 1 75 1 view .LVU59
 177 0036 08BD     		pop	{r3, pc}
 178              	.L10:
  72:Src/spi.c     ****   }
 179              		.loc 1 72 5 is_stmt 1 view .LVU60
 180 0038 FFF7FEFF 		bl	Error_Handler
 181              	.LVL3:
 182              		.loc 1 75 1 is_stmt 0 view .LVU61
 183 003c FBE7     		b	.L7
 184              	.L12:
 185 003e 00BF     		.align	2
 186              	.L11:
 187 0040 00000000 		.word	.LANCHOR1
 188 0044 00380040 		.word	1073756160
 189              		.cfi_endproc
 190              	.LFE131:
 192              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 193              		.align	1
 194              		.global	HAL_SPI_MspInit
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 199              	HAL_SPI_MspInit:
 200              	.LVL4:
 201              	.LFB132:
  76:Src/spi.c     **** 
  77:Src/spi.c     **** void HAL_SPI_MspInit(SPI_HandleTypeDef* spiHandle)
  78:Src/spi.c     **** {
 202              		.loc 1 78 1 is_stmt 1 view -0
 203              		.cfi_startproc
 204              		@ args = 0, pretend = 0, frame = 40
 205              		@ frame_needed = 0, uses_anonymous_args = 0
 206              		.loc 1 78 1 is_stmt 0 view .LVU63
 207 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 208              	.LCFI2:
 209              		.cfi_def_cfa_offset 28
 210              		.cfi_offset 4, -28
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 6


 211              		.cfi_offset 5, -24
 212              		.cfi_offset 6, -20
 213              		.cfi_offset 7, -16
 214              		.cfi_offset 8, -12
 215              		.cfi_offset 9, -8
 216              		.cfi_offset 14, -4
 217 0004 8BB0     		sub	sp, sp, #44
 218              	.LCFI3:
 219              		.cfi_def_cfa_offset 72
  79:Src/spi.c     **** 
  80:Src/spi.c     ****   GPIO_InitTypeDef GPIO_InitStruct = {0};
 220              		.loc 1 80 3 is_stmt 1 view .LVU64
 221              		.loc 1 80 20 is_stmt 0 view .LVU65
 222 0006 0023     		movs	r3, #0
 223 0008 0593     		str	r3, [sp, #20]
 224 000a 0693     		str	r3, [sp, #24]
 225 000c 0793     		str	r3, [sp, #28]
 226 000e 0893     		str	r3, [sp, #32]
 227 0010 0993     		str	r3, [sp, #36]
  81:Src/spi.c     ****   if(spiHandle->Instance==SPI1)
 228              		.loc 1 81 3 is_stmt 1 view .LVU66
 229              		.loc 1 81 15 is_stmt 0 view .LVU67
 230 0012 0368     		ldr	r3, [r0]
 231              		.loc 1 81 5 view .LVU68
 232 0014 534A     		ldr	r2, .L23
 233 0016 9342     		cmp	r3, r2
 234 0018 05D0     		beq	.L19
  82:Src/spi.c     ****   {
  83:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspInit 0 */
  84:Src/spi.c     **** 
  85:Src/spi.c     ****   /* USER CODE END SPI1_MspInit 0 */
  86:Src/spi.c     ****     /* SPI1 clock enable */
  87:Src/spi.c     ****     __HAL_RCC_SPI1_CLK_ENABLE();
  88:Src/spi.c     **** 
  89:Src/spi.c     ****     __HAL_RCC_GPIOB_CLK_ENABLE();
  90:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
  91:Src/spi.c     ****     /**SPI1 GPIO Configuration
  92:Src/spi.c     ****     PB4     ------> SPI1_MISO
  93:Src/spi.c     ****     PB3     ------> SPI1_SCK
  94:Src/spi.c     ****     PA7     ------> SPI1_MOSI
  95:Src/spi.c     ****     */
  96:Src/spi.c     ****     GPIO_InitStruct.Pin = GPIO_PIN_4|GPIO_PIN_3;
  97:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  98:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
  99:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 100:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 101:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 102:Src/spi.c     **** 
 103:Src/spi.c     ****     GPIO_InitStruct.Pin = GPIO_PIN_7;
 104:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 105:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 106:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 107:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 108:Src/spi.c     ****     HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
 109:Src/spi.c     **** 
 110:Src/spi.c     ****     /* SPI1 DMA Init */
 111:Src/spi.c     ****     /* SPI1_RX Init */
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 7


 112:Src/spi.c     ****     hdma_spi1_rx.Instance = DMA2_Stream2;
 113:Src/spi.c     ****     hdma_spi1_rx.Init.Channel = DMA_CHANNEL_3;
 114:Src/spi.c     ****     hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 115:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 116:Src/spi.c     ****     hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 117:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 118:Src/spi.c     ****     hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 119:Src/spi.c     ****     hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 120:Src/spi.c     ****     hdma_spi1_rx.Init.Priority = DMA_PRIORITY_VERY_HIGH;
 121:Src/spi.c     ****     hdma_spi1_rx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 122:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_rx) != HAL_OK)
 123:Src/spi.c     ****     {
 124:Src/spi.c     ****       Error_Handler();
 125:Src/spi.c     ****     }
 126:Src/spi.c     **** 
 127:Src/spi.c     ****     __HAL_LINKDMA(spiHandle,hdmarx,hdma_spi1_rx);
 128:Src/spi.c     **** 
 129:Src/spi.c     ****     /* SPI1_TX Init */
 130:Src/spi.c     ****     hdma_spi1_tx.Instance = DMA2_Stream3;
 131:Src/spi.c     ****     hdma_spi1_tx.Init.Channel = DMA_CHANNEL_3;
 132:Src/spi.c     ****     hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 133:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 134:Src/spi.c     ****     hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 135:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 136:Src/spi.c     ****     hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 137:Src/spi.c     ****     hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 138:Src/spi.c     ****     hdma_spi1_tx.Init.Priority = DMA_PRIORITY_HIGH;
 139:Src/spi.c     ****     hdma_spi1_tx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 140:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_tx) != HAL_OK)
 141:Src/spi.c     ****     {
 142:Src/spi.c     ****       Error_Handler();
 143:Src/spi.c     ****     }
 144:Src/spi.c     **** 
 145:Src/spi.c     ****     __HAL_LINKDMA(spiHandle,hdmatx,hdma_spi1_tx);
 146:Src/spi.c     **** 
 147:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspInit 1 */
 148:Src/spi.c     **** 
 149:Src/spi.c     ****   /* USER CODE END SPI1_MspInit 1 */
 150:Src/spi.c     ****   }
 151:Src/spi.c     ****   else if(spiHandle->Instance==SPI2)
 235              		.loc 1 151 8 is_stmt 1 view .LVU69
 236              		.loc 1 151 10 is_stmt 0 view .LVU70
 237 001a 534A     		ldr	r2, .L23+4
 238 001c 9342     		cmp	r3, r2
 239 001e 7AD0     		beq	.L20
 240              	.LVL5:
 241              	.L13:
 152:Src/spi.c     ****   {
 153:Src/spi.c     ****   /* USER CODE BEGIN SPI2_MspInit 0 */
 154:Src/spi.c     **** 
 155:Src/spi.c     ****   /* USER CODE END SPI2_MspInit 0 */
 156:Src/spi.c     ****     /* SPI2 clock enable */
 157:Src/spi.c     ****     __HAL_RCC_SPI2_CLK_ENABLE();
 158:Src/spi.c     **** 
 159:Src/spi.c     ****     __HAL_RCC_GPIOB_CLK_ENABLE();
 160:Src/spi.c     ****     /**SPI2 GPIO Configuration
 161:Src/spi.c     ****     PB13     ------> SPI2_SCK
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 8


 162:Src/spi.c     ****     PB14     ------> SPI2_MISO
 163:Src/spi.c     ****     PB15     ------> SPI2_MOSI
 164:Src/spi.c     ****     */
 165:Src/spi.c     ****     GPIO_InitStruct.Pin = GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15;
 166:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 167:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 168:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 169:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
 170:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 171:Src/spi.c     **** 
 172:Src/spi.c     ****   /* USER CODE BEGIN SPI2_MspInit 1 */
 173:Src/spi.c     **** 
 174:Src/spi.c     ****   /* USER CODE END SPI2_MspInit 1 */
 175:Src/spi.c     ****   }
 176:Src/spi.c     **** }
 242              		.loc 1 176 1 view .LVU71
 243 0020 0BB0     		add	sp, sp, #44
 244              	.LCFI4:
 245              		.cfi_remember_state
 246              		.cfi_def_cfa_offset 28
 247              		@ sp needed
 248 0022 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 249              	.LVL6:
 250              	.L19:
 251              	.LCFI5:
 252              		.cfi_restore_state
 253              		.loc 1 176 1 view .LVU72
 254 0026 0446     		mov	r4, r0
  87:Src/spi.c     **** 
 255              		.loc 1 87 5 is_stmt 1 view .LVU73
 256              	.LBB2:
  87:Src/spi.c     **** 
 257              		.loc 1 87 5 view .LVU74
 258 0028 0025     		movs	r5, #0
 259 002a 0095     		str	r5, [sp]
  87:Src/spi.c     **** 
 260              		.loc 1 87 5 view .LVU75
 261 002c 4F4B     		ldr	r3, .L23+8
 262 002e 5A6C     		ldr	r2, [r3, #68]
 263 0030 42F48052 		orr	r2, r2, #4096
 264 0034 5A64     		str	r2, [r3, #68]
  87:Src/spi.c     **** 
 265              		.loc 1 87 5 view .LVU76
 266 0036 5A6C     		ldr	r2, [r3, #68]
 267 0038 02F48052 		and	r2, r2, #4096
 268 003c 0092     		str	r2, [sp]
  87:Src/spi.c     **** 
 269              		.loc 1 87 5 view .LVU77
 270 003e 009A     		ldr	r2, [sp]
 271              	.LBE2:
  87:Src/spi.c     **** 
 272              		.loc 1 87 5 view .LVU78
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 273              		.loc 1 89 5 view .LVU79
 274              	.LBB3:
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 275              		.loc 1 89 5 view .LVU80
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 9


 276 0040 0195     		str	r5, [sp, #4]
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 277              		.loc 1 89 5 view .LVU81
 278 0042 1A6B     		ldr	r2, [r3, #48]
 279 0044 42F00202 		orr	r2, r2, #2
 280 0048 1A63     		str	r2, [r3, #48]
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 281              		.loc 1 89 5 view .LVU82
 282 004a 1A6B     		ldr	r2, [r3, #48]
 283 004c 02F00202 		and	r2, r2, #2
 284 0050 0192     		str	r2, [sp, #4]
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 285              		.loc 1 89 5 view .LVU83
 286 0052 019A     		ldr	r2, [sp, #4]
 287              	.LBE3:
  89:Src/spi.c     ****     __HAL_RCC_GPIOA_CLK_ENABLE();
 288              		.loc 1 89 5 view .LVU84
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 289              		.loc 1 90 5 view .LVU85
 290              	.LBB4:
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 291              		.loc 1 90 5 view .LVU86
 292 0054 0295     		str	r5, [sp, #8]
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 293              		.loc 1 90 5 view .LVU87
 294 0056 1A6B     		ldr	r2, [r3, #48]
 295 0058 42F00102 		orr	r2, r2, #1
 296 005c 1A63     		str	r2, [r3, #48]
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 297              		.loc 1 90 5 view .LVU88
 298 005e 1B6B     		ldr	r3, [r3, #48]
 299 0060 03F00103 		and	r3, r3, #1
 300 0064 0293     		str	r3, [sp, #8]
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 301              		.loc 1 90 5 view .LVU89
 302 0066 029B     		ldr	r3, [sp, #8]
 303              	.LBE4:
  90:Src/spi.c     ****     /**SPI1 GPIO Configuration
 304              		.loc 1 90 5 view .LVU90
  96:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 305              		.loc 1 96 5 view .LVU91
  96:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 306              		.loc 1 96 25 is_stmt 0 view .LVU92
 307 0068 1823     		movs	r3, #24
 308 006a 0593     		str	r3, [sp, #20]
  97:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 309              		.loc 1 97 5 is_stmt 1 view .LVU93
  97:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 310              		.loc 1 97 26 is_stmt 0 view .LVU94
 311 006c 4FF00209 		mov	r9, #2
 312 0070 CDF81890 		str	r9, [sp, #24]
  98:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 313              		.loc 1 98 5 is_stmt 1 view .LVU95
  98:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 314              		.loc 1 98 26 is_stmt 0 view .LVU96
 315 0074 4FF00108 		mov	r8, #1
 316 0078 CDF81C80 		str	r8, [sp, #28]
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 10


  99:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 317              		.loc 1 99 5 is_stmt 1 view .LVU97
  99:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 318              		.loc 1 99 27 is_stmt 0 view .LVU98
 319 007c 0327     		movs	r7, #3
 320 007e 0897     		str	r7, [sp, #32]
 100:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 321              		.loc 1 100 5 is_stmt 1 view .LVU99
 100:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 322              		.loc 1 100 31 is_stmt 0 view .LVU100
 323 0080 0526     		movs	r6, #5
 324 0082 0996     		str	r6, [sp, #36]
 101:Src/spi.c     **** 
 325              		.loc 1 101 5 is_stmt 1 view .LVU101
 326 0084 05A9     		add	r1, sp, #20
 327 0086 3A48     		ldr	r0, .L23+12
 328              	.LVL7:
 101:Src/spi.c     **** 
 329              		.loc 1 101 5 is_stmt 0 view .LVU102
 330 0088 FFF7FEFF 		bl	HAL_GPIO_Init
 331              	.LVL8:
 103:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 332              		.loc 1 103 5 is_stmt 1 view .LVU103
 103:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 333              		.loc 1 103 25 is_stmt 0 view .LVU104
 334 008c 8023     		movs	r3, #128
 335 008e 0593     		str	r3, [sp, #20]
 104:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 336              		.loc 1 104 5 is_stmt 1 view .LVU105
 104:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 337              		.loc 1 104 26 is_stmt 0 view .LVU106
 338 0090 CDF81890 		str	r9, [sp, #24]
 105:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 339              		.loc 1 105 5 is_stmt 1 view .LVU107
 105:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 340              		.loc 1 105 26 is_stmt 0 view .LVU108
 341 0094 CDF81C80 		str	r8, [sp, #28]
 106:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 342              		.loc 1 106 5 is_stmt 1 view .LVU109
 106:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI1;
 343              		.loc 1 106 27 is_stmt 0 view .LVU110
 344 0098 0897     		str	r7, [sp, #32]
 107:Src/spi.c     ****     HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
 345              		.loc 1 107 5 is_stmt 1 view .LVU111
 107:Src/spi.c     ****     HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
 346              		.loc 1 107 31 is_stmt 0 view .LVU112
 347 009a 0996     		str	r6, [sp, #36]
 108:Src/spi.c     **** 
 348              		.loc 1 108 5 is_stmt 1 view .LVU113
 349 009c 05A9     		add	r1, sp, #20
 350 009e 3548     		ldr	r0, .L23+16
 351 00a0 FFF7FEFF 		bl	HAL_GPIO_Init
 352              	.LVL9:
 112:Src/spi.c     ****     hdma_spi1_rx.Init.Channel = DMA_CHANNEL_3;
 353              		.loc 1 112 5 view .LVU114
 112:Src/spi.c     ****     hdma_spi1_rx.Init.Channel = DMA_CHANNEL_3;
 354              		.loc 1 112 27 is_stmt 0 view .LVU115
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 11


 355 00a4 3448     		ldr	r0, .L23+20
 356 00a6 354B     		ldr	r3, .L23+24
 357 00a8 0360     		str	r3, [r0]
 113:Src/spi.c     ****     hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 358              		.loc 1 113 5 is_stmt 1 view .LVU116
 113:Src/spi.c     ****     hdma_spi1_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 359              		.loc 1 113 31 is_stmt 0 view .LVU117
 360 00aa 4FF0C063 		mov	r3, #100663296
 361 00ae 4360     		str	r3, [r0, #4]
 114:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 362              		.loc 1 114 5 is_stmt 1 view .LVU118
 114:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 363              		.loc 1 114 33 is_stmt 0 view .LVU119
 364 00b0 8560     		str	r5, [r0, #8]
 115:Src/spi.c     ****     hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 365              		.loc 1 115 5 is_stmt 1 view .LVU120
 115:Src/spi.c     ****     hdma_spi1_rx.Init.MemInc = DMA_MINC_ENABLE;
 366              		.loc 1 115 33 is_stmt 0 view .LVU121
 367 00b2 C560     		str	r5, [r0, #12]
 116:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 368              		.loc 1 116 5 is_stmt 1 view .LVU122
 116:Src/spi.c     ****     hdma_spi1_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 369              		.loc 1 116 30 is_stmt 0 view .LVU123
 370 00b4 4FF48063 		mov	r3, #1024
 371 00b8 0361     		str	r3, [r0, #16]
 117:Src/spi.c     ****     hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 372              		.loc 1 117 5 is_stmt 1 view .LVU124
 117:Src/spi.c     ****     hdma_spi1_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 373              		.loc 1 117 43 is_stmt 0 view .LVU125
 374 00ba 4561     		str	r5, [r0, #20]
 118:Src/spi.c     ****     hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 375              		.loc 1 118 5 is_stmt 1 view .LVU126
 118:Src/spi.c     ****     hdma_spi1_rx.Init.Mode = DMA_NORMAL;
 376              		.loc 1 118 40 is_stmt 0 view .LVU127
 377 00bc 8561     		str	r5, [r0, #24]
 119:Src/spi.c     ****     hdma_spi1_rx.Init.Priority = DMA_PRIORITY_VERY_HIGH;
 378              		.loc 1 119 5 is_stmt 1 view .LVU128
 119:Src/spi.c     ****     hdma_spi1_rx.Init.Priority = DMA_PRIORITY_VERY_HIGH;
 379              		.loc 1 119 28 is_stmt 0 view .LVU129
 380 00be C561     		str	r5, [r0, #28]
 120:Src/spi.c     ****     hdma_spi1_rx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 381              		.loc 1 120 5 is_stmt 1 view .LVU130
 120:Src/spi.c     ****     hdma_spi1_rx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 382              		.loc 1 120 32 is_stmt 0 view .LVU131
 383 00c0 4FF44033 		mov	r3, #196608
 384 00c4 0362     		str	r3, [r0, #32]
 121:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_rx) != HAL_OK)
 385              		.loc 1 121 5 is_stmt 1 view .LVU132
 121:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_rx) != HAL_OK)
 386              		.loc 1 121 32 is_stmt 0 view .LVU133
 387 00c6 4562     		str	r5, [r0, #36]
 122:Src/spi.c     ****     {
 388              		.loc 1 122 5 is_stmt 1 view .LVU134
 122:Src/spi.c     ****     {
 389              		.loc 1 122 9 is_stmt 0 view .LVU135
 390 00c8 FFF7FEFF 		bl	HAL_DMA_Init
 391              	.LVL10:
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 12


 122:Src/spi.c     ****     {
 392              		.loc 1 122 8 view .LVU136
 393 00cc E8B9     		cbnz	r0, .L21
 394              	.L15:
 127:Src/spi.c     **** 
 395              		.loc 1 127 5 is_stmt 1 view .LVU137
 127:Src/spi.c     **** 
 396              		.loc 1 127 5 view .LVU138
 397 00ce 2A4B     		ldr	r3, .L23+20
 398 00d0 E364     		str	r3, [r4, #76]
 127:Src/spi.c     **** 
 399              		.loc 1 127 5 view .LVU139
 400 00d2 9C63     		str	r4, [r3, #56]
 127:Src/spi.c     **** 
 401              		.loc 1 127 5 view .LVU140
 130:Src/spi.c     ****     hdma_spi1_tx.Init.Channel = DMA_CHANNEL_3;
 402              		.loc 1 130 5 view .LVU141
 130:Src/spi.c     ****     hdma_spi1_tx.Init.Channel = DMA_CHANNEL_3;
 403              		.loc 1 130 27 is_stmt 0 view .LVU142
 404 00d4 2A48     		ldr	r0, .L23+28
 405 00d6 2B4B     		ldr	r3, .L23+32
 406 00d8 0360     		str	r3, [r0]
 131:Src/spi.c     ****     hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 407              		.loc 1 131 5 is_stmt 1 view .LVU143
 131:Src/spi.c     ****     hdma_spi1_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 408              		.loc 1 131 31 is_stmt 0 view .LVU144
 409 00da 4FF0C063 		mov	r3, #100663296
 410 00de 4360     		str	r3, [r0, #4]
 132:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 411              		.loc 1 132 5 is_stmt 1 view .LVU145
 132:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphInc = DMA_PINC_DISABLE;
 412              		.loc 1 132 33 is_stmt 0 view .LVU146
 413 00e0 4023     		movs	r3, #64
 414 00e2 8360     		str	r3, [r0, #8]
 133:Src/spi.c     ****     hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 415              		.loc 1 133 5 is_stmt 1 view .LVU147
 133:Src/spi.c     ****     hdma_spi1_tx.Init.MemInc = DMA_MINC_ENABLE;
 416              		.loc 1 133 33 is_stmt 0 view .LVU148
 417 00e4 0023     		movs	r3, #0
 418 00e6 C360     		str	r3, [r0, #12]
 134:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 419              		.loc 1 134 5 is_stmt 1 view .LVU149
 134:Src/spi.c     ****     hdma_spi1_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 420              		.loc 1 134 30 is_stmt 0 view .LVU150
 421 00e8 4FF48062 		mov	r2, #1024
 422 00ec 0261     		str	r2, [r0, #16]
 135:Src/spi.c     ****     hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 423              		.loc 1 135 5 is_stmt 1 view .LVU151
 135:Src/spi.c     ****     hdma_spi1_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 424              		.loc 1 135 43 is_stmt 0 view .LVU152
 425 00ee 4361     		str	r3, [r0, #20]
 136:Src/spi.c     ****     hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 426              		.loc 1 136 5 is_stmt 1 view .LVU153
 136:Src/spi.c     ****     hdma_spi1_tx.Init.Mode = DMA_NORMAL;
 427              		.loc 1 136 40 is_stmt 0 view .LVU154
 428 00f0 8361     		str	r3, [r0, #24]
 137:Src/spi.c     ****     hdma_spi1_tx.Init.Priority = DMA_PRIORITY_HIGH;
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 13


 429              		.loc 1 137 5 is_stmt 1 view .LVU155
 137:Src/spi.c     ****     hdma_spi1_tx.Init.Priority = DMA_PRIORITY_HIGH;
 430              		.loc 1 137 28 is_stmt 0 view .LVU156
 431 00f2 C361     		str	r3, [r0, #28]
 138:Src/spi.c     ****     hdma_spi1_tx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 432              		.loc 1 138 5 is_stmt 1 view .LVU157
 138:Src/spi.c     ****     hdma_spi1_tx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 433              		.loc 1 138 32 is_stmt 0 view .LVU158
 434 00f4 4FF40032 		mov	r2, #131072
 435 00f8 0262     		str	r2, [r0, #32]
 139:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_tx) != HAL_OK)
 436              		.loc 1 139 5 is_stmt 1 view .LVU159
 139:Src/spi.c     ****     if (HAL_DMA_Init(&hdma_spi1_tx) != HAL_OK)
 437              		.loc 1 139 32 is_stmt 0 view .LVU160
 438 00fa 4362     		str	r3, [r0, #36]
 140:Src/spi.c     ****     {
 439              		.loc 1 140 5 is_stmt 1 view .LVU161
 140:Src/spi.c     ****     {
 440              		.loc 1 140 9 is_stmt 0 view .LVU162
 441 00fc FFF7FEFF 		bl	HAL_DMA_Init
 442              	.LVL11:
 140:Src/spi.c     ****     {
 443              		.loc 1 140 8 view .LVU163
 444 0100 30B9     		cbnz	r0, .L22
 445              	.L16:
 145:Src/spi.c     **** 
 446              		.loc 1 145 5 is_stmt 1 view .LVU164
 145:Src/spi.c     **** 
 447              		.loc 1 145 5 view .LVU165
 448 0102 1F4B     		ldr	r3, .L23+28
 449 0104 A364     		str	r3, [r4, #72]
 145:Src/spi.c     **** 
 450              		.loc 1 145 5 view .LVU166
 451 0106 9C63     		str	r4, [r3, #56]
 145:Src/spi.c     **** 
 452              		.loc 1 145 5 view .LVU167
 453 0108 8AE7     		b	.L13
 454              	.L21:
 124:Src/spi.c     ****     }
 455              		.loc 1 124 7 view .LVU168
 456 010a FFF7FEFF 		bl	Error_Handler
 457              	.LVL12:
 458 010e DEE7     		b	.L15
 459              	.L22:
 142:Src/spi.c     ****     }
 460              		.loc 1 142 7 view .LVU169
 461 0110 FFF7FEFF 		bl	Error_Handler
 462              	.LVL13:
 463 0114 F5E7     		b	.L16
 464              	.LVL14:
 465              	.L20:
 157:Src/spi.c     **** 
 466              		.loc 1 157 5 view .LVU170
 467              	.LBB5:
 157:Src/spi.c     **** 
 468              		.loc 1 157 5 view .LVU171
 469 0116 0021     		movs	r1, #0
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 14


 470 0118 0391     		str	r1, [sp, #12]
 157:Src/spi.c     **** 
 471              		.loc 1 157 5 view .LVU172
 472 011a 144B     		ldr	r3, .L23+8
 473 011c 1A6C     		ldr	r2, [r3, #64]
 474 011e 42F48042 		orr	r2, r2, #16384
 475 0122 1A64     		str	r2, [r3, #64]
 157:Src/spi.c     **** 
 476              		.loc 1 157 5 view .LVU173
 477 0124 1A6C     		ldr	r2, [r3, #64]
 478 0126 02F48042 		and	r2, r2, #16384
 479 012a 0392     		str	r2, [sp, #12]
 157:Src/spi.c     **** 
 480              		.loc 1 157 5 view .LVU174
 481 012c 039A     		ldr	r2, [sp, #12]
 482              	.LBE5:
 157:Src/spi.c     **** 
 483              		.loc 1 157 5 view .LVU175
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 484              		.loc 1 159 5 view .LVU176
 485              	.LBB6:
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 486              		.loc 1 159 5 view .LVU177
 487 012e 0491     		str	r1, [sp, #16]
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 488              		.loc 1 159 5 view .LVU178
 489 0130 1A6B     		ldr	r2, [r3, #48]
 490 0132 42F00202 		orr	r2, r2, #2
 491 0136 1A63     		str	r2, [r3, #48]
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 492              		.loc 1 159 5 view .LVU179
 493 0138 1B6B     		ldr	r3, [r3, #48]
 494 013a 03F00203 		and	r3, r3, #2
 495 013e 0493     		str	r3, [sp, #16]
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 496              		.loc 1 159 5 view .LVU180
 497 0140 049B     		ldr	r3, [sp, #16]
 498              	.LBE6:
 159:Src/spi.c     ****     /**SPI2 GPIO Configuration
 499              		.loc 1 159 5 view .LVU181
 165:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 500              		.loc 1 165 5 view .LVU182
 165:Src/spi.c     ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 501              		.loc 1 165 25 is_stmt 0 view .LVU183
 502 0142 4FF46043 		mov	r3, #57344
 503 0146 0593     		str	r3, [sp, #20]
 166:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 504              		.loc 1 166 5 is_stmt 1 view .LVU184
 166:Src/spi.c     ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 505              		.loc 1 166 26 is_stmt 0 view .LVU185
 506 0148 0223     		movs	r3, #2
 507 014a 0693     		str	r3, [sp, #24]
 167:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 508              		.loc 1 167 5 is_stmt 1 view .LVU186
 167:Src/spi.c     ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_VERY_HIGH;
 509              		.loc 1 167 26 is_stmt 0 view .LVU187
 510 014c 0123     		movs	r3, #1
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 15


 511 014e 0793     		str	r3, [sp, #28]
 168:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
 512              		.loc 1 168 5 is_stmt 1 view .LVU188
 168:Src/spi.c     ****     GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
 513              		.loc 1 168 27 is_stmt 0 view .LVU189
 514 0150 0323     		movs	r3, #3
 515 0152 0893     		str	r3, [sp, #32]
 169:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 516              		.loc 1 169 5 is_stmt 1 view .LVU190
 169:Src/spi.c     ****     HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 517              		.loc 1 169 31 is_stmt 0 view .LVU191
 518 0154 0523     		movs	r3, #5
 519 0156 0993     		str	r3, [sp, #36]
 170:Src/spi.c     **** 
 520              		.loc 1 170 5 is_stmt 1 view .LVU192
 521 0158 05A9     		add	r1, sp, #20
 522 015a 0548     		ldr	r0, .L23+12
 523              	.LVL15:
 170:Src/spi.c     **** 
 524              		.loc 1 170 5 is_stmt 0 view .LVU193
 525 015c FFF7FEFF 		bl	HAL_GPIO_Init
 526              	.LVL16:
 527              		.loc 1 176 1 view .LVU194
 528 0160 5EE7     		b	.L13
 529              	.L24:
 530 0162 00BF     		.align	2
 531              	.L23:
 532 0164 00300140 		.word	1073819648
 533 0168 00380040 		.word	1073756160
 534 016c 00380240 		.word	1073887232
 535 0170 00040240 		.word	1073873920
 536 0174 00000240 		.word	1073872896
 537 0178 00000000 		.word	.LANCHOR2
 538 017c 40640240 		.word	1073898560
 539 0180 00000000 		.word	.LANCHOR3
 540 0184 58640240 		.word	1073898584
 541              		.cfi_endproc
 542              	.LFE132:
 544              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 545              		.align	1
 546              		.global	HAL_SPI_MspDeInit
 547              		.syntax unified
 548              		.thumb
 549              		.thumb_func
 551              	HAL_SPI_MspDeInit:
 552              	.LVL17:
 553              	.LFB133:
 177:Src/spi.c     **** 
 178:Src/spi.c     **** void HAL_SPI_MspDeInit(SPI_HandleTypeDef* spiHandle)
 179:Src/spi.c     **** {
 554              		.loc 1 179 1 is_stmt 1 view -0
 555              		.cfi_startproc
 556              		@ args = 0, pretend = 0, frame = 0
 557              		@ frame_needed = 0, uses_anonymous_args = 0
 558              		.loc 1 179 1 is_stmt 0 view .LVU196
 559 0000 10B5     		push	{r4, lr}
 560              	.LCFI6:
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 16


 561              		.cfi_def_cfa_offset 8
 562              		.cfi_offset 4, -8
 563              		.cfi_offset 14, -4
 180:Src/spi.c     **** 
 181:Src/spi.c     ****   if(spiHandle->Instance==SPI1)
 564              		.loc 1 181 3 is_stmt 1 view .LVU197
 565              		.loc 1 181 15 is_stmt 0 view .LVU198
 566 0002 0368     		ldr	r3, [r0]
 567              		.loc 1 181 5 view .LVU199
 568 0004 144A     		ldr	r2, .L31
 569 0006 9342     		cmp	r3, r2
 570 0008 03D0     		beq	.L29
 182:Src/spi.c     ****   {
 183:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 0 */
 184:Src/spi.c     **** 
 185:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 0 */
 186:Src/spi.c     ****     /* Peripheral clock disable */
 187:Src/spi.c     ****     __HAL_RCC_SPI1_CLK_DISABLE();
 188:Src/spi.c     **** 
 189:Src/spi.c     ****     /**SPI1 GPIO Configuration
 190:Src/spi.c     ****     PB4     ------> SPI1_MISO
 191:Src/spi.c     ****     PB3     ------> SPI1_SCK
 192:Src/spi.c     ****     PA7     ------> SPI1_MOSI
 193:Src/spi.c     ****     */
 194:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOB, GPIO_PIN_4|GPIO_PIN_3);
 195:Src/spi.c     **** 
 196:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOA, GPIO_PIN_7);
 197:Src/spi.c     **** 
 198:Src/spi.c     ****     /* SPI1 DMA DeInit */
 199:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 200:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 201:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 202:Src/spi.c     **** 
 203:Src/spi.c     ****   /* USER CODE END SPI1_MspDeInit 1 */
 204:Src/spi.c     ****   }
 205:Src/spi.c     ****   else if(spiHandle->Instance==SPI2)
 571              		.loc 1 205 8 is_stmt 1 view .LVU200
 572              		.loc 1 205 10 is_stmt 0 view .LVU201
 573 000a 144A     		ldr	r2, .L31+4
 574 000c 9342     		cmp	r3, r2
 575 000e 16D0     		beq	.L30
 576              	.LVL18:
 577              	.L25:
 206:Src/spi.c     ****   {
 207:Src/spi.c     ****   /* USER CODE BEGIN SPI2_MspDeInit 0 */
 208:Src/spi.c     **** 
 209:Src/spi.c     ****   /* USER CODE END SPI2_MspDeInit 0 */
 210:Src/spi.c     ****     /* Peripheral clock disable */
 211:Src/spi.c     ****     __HAL_RCC_SPI2_CLK_DISABLE();
 212:Src/spi.c     **** 
 213:Src/spi.c     ****     /**SPI2 GPIO Configuration
 214:Src/spi.c     ****     PB13     ------> SPI2_SCK
 215:Src/spi.c     ****     PB14     ------> SPI2_MISO
 216:Src/spi.c     ****     PB15     ------> SPI2_MOSI
 217:Src/spi.c     ****     */
 218:Src/spi.c     ****     HAL_GPIO_DeInit(GPIOB, GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15);
 219:Src/spi.c     **** 
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 17


 220:Src/spi.c     ****   /* USER CODE BEGIN SPI2_MspDeInit 1 */
 221:Src/spi.c     **** 
 222:Src/spi.c     ****   /* USER CODE END SPI2_MspDeInit 1 */
 223:Src/spi.c     ****   }
 224:Src/spi.c     **** }
 578              		.loc 1 224 1 view .LVU202
 579 0010 10BD     		pop	{r4, pc}
 580              	.LVL19:
 581              	.L29:
 582              		.loc 1 224 1 view .LVU203
 583 0012 0446     		mov	r4, r0
 187:Src/spi.c     **** 
 584              		.loc 1 187 5 is_stmt 1 view .LVU204
 585 0014 02F58432 		add	r2, r2, #67584
 586 0018 536C     		ldr	r3, [r2, #68]
 587 001a 23F48053 		bic	r3, r3, #4096
 588 001e 5364     		str	r3, [r2, #68]
 194:Src/spi.c     **** 
 589              		.loc 1 194 5 view .LVU205
 590 0020 1821     		movs	r1, #24
 591 0022 0F48     		ldr	r0, .L31+8
 592              	.LVL20:
 194:Src/spi.c     **** 
 593              		.loc 1 194 5 is_stmt 0 view .LVU206
 594 0024 FFF7FEFF 		bl	HAL_GPIO_DeInit
 595              	.LVL21:
 196:Src/spi.c     **** 
 596              		.loc 1 196 5 is_stmt 1 view .LVU207
 597 0028 8021     		movs	r1, #128
 598 002a 0E48     		ldr	r0, .L31+12
 599 002c FFF7FEFF 		bl	HAL_GPIO_DeInit
 600              	.LVL22:
 199:Src/spi.c     ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 601              		.loc 1 199 5 view .LVU208
 602 0030 E06C     		ldr	r0, [r4, #76]
 603 0032 FFF7FEFF 		bl	HAL_DMA_DeInit
 604              	.LVL23:
 200:Src/spi.c     ****   /* USER CODE BEGIN SPI1_MspDeInit 1 */
 605              		.loc 1 200 5 view .LVU209
 606 0036 A06C     		ldr	r0, [r4, #72]
 607 0038 FFF7FEFF 		bl	HAL_DMA_DeInit
 608              	.LVL24:
 609 003c E8E7     		b	.L25
 610              	.LVL25:
 611              	.L30:
 211:Src/spi.c     **** 
 612              		.loc 1 211 5 view .LVU210
 613 003e 02F50032 		add	r2, r2, #131072
 614 0042 136C     		ldr	r3, [r2, #64]
 615 0044 23F48043 		bic	r3, r3, #16384
 616 0048 1364     		str	r3, [r2, #64]
 218:Src/spi.c     **** 
 617              		.loc 1 218 5 view .LVU211
 618 004a 4FF46041 		mov	r1, #57344
 619 004e 0448     		ldr	r0, .L31+8
 620              	.LVL26:
 218:Src/spi.c     **** 
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 18


 621              		.loc 1 218 5 is_stmt 0 view .LVU212
 622 0050 FFF7FEFF 		bl	HAL_GPIO_DeInit
 623              	.LVL27:
 624              		.loc 1 224 1 view .LVU213
 625 0054 DCE7     		b	.L25
 626              	.L32:
 627 0056 00BF     		.align	2
 628              	.L31:
 629 0058 00300140 		.word	1073819648
 630 005c 00380040 		.word	1073756160
 631 0060 00040240 		.word	1073873920
 632 0064 00000240 		.word	1073872896
 633              		.cfi_endproc
 634              	.LFE133:
 636              		.global	hdma_spi1_tx
 637              		.global	hdma_spi1_rx
 638              		.global	hspi2
 639              		.global	hspi1
 640              		.section	.bss.hdma_spi1_rx,"aw",%nobits
 641              		.align	2
 642              		.set	.LANCHOR2,. + 0
 645              	hdma_spi1_rx:
 646 0000 00000000 		.space	96
 646      00000000 
 646      00000000 
 646      00000000 
 646      00000000 
 647              		.section	.bss.hdma_spi1_tx,"aw",%nobits
 648              		.align	2
 649              		.set	.LANCHOR3,. + 0
 652              	hdma_spi1_tx:
 653 0000 00000000 		.space	96
 653      00000000 
 653      00000000 
 653      00000000 
 653      00000000 
 654              		.section	.bss.hspi1,"aw",%nobits
 655              		.align	2
 656              		.set	.LANCHOR0,. + 0
 659              	hspi1:
 660 0000 00000000 		.space	88
 660      00000000 
 660      00000000 
 660      00000000 
 660      00000000 
 661              		.section	.bss.hspi2,"aw",%nobits
 662              		.align	2
 663              		.set	.LANCHOR1,. + 0
 666              	hspi2:
 667 0000 00000000 		.space	88
 667      00000000 
 667      00000000 
 667      00000000 
 667      00000000 
 668              		.text
 669              	.Letext0:
 670              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 19


 671              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 672              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 673              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 674              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 675              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 676              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 677              		.file 9 "Inc/spi.h"
 678              		.file 10 "Inc/main.h"
ARM GAS  C:\Users\86152\AppData\Local\Temp\cczuC29L.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 spi.c
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:20     .text.MX_SPI1_Init:00000000 $t
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:26     .text.MX_SPI1_Init:00000000 MX_SPI1_Init
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:101    .text.MX_SPI1_Init:00000040 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:107    .text.MX_SPI2_Init:00000000 $t
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:113    .text.MX_SPI2_Init:00000000 MX_SPI2_Init
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:187    .text.MX_SPI2_Init:00000040 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:193    .text.HAL_SPI_MspInit:00000000 $t
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:199    .text.HAL_SPI_MspInit:00000000 HAL_SPI_MspInit
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:532    .text.HAL_SPI_MspInit:00000164 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:545    .text.HAL_SPI_MspDeInit:00000000 $t
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:551    .text.HAL_SPI_MspDeInit:00000000 HAL_SPI_MspDeInit
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:629    .text.HAL_SPI_MspDeInit:00000058 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:652    .bss.hdma_spi1_tx:00000000 hdma_spi1_tx
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:645    .bss.hdma_spi1_rx:00000000 hdma_spi1_rx
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:666    .bss.hspi2:00000000 hspi2
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:659    .bss.hspi1:00000000 hspi1
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:641    .bss.hdma_spi1_rx:00000000 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:648    .bss.hdma_spi1_tx:00000000 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:655    .bss.hspi1:00000000 $d
C:\Users\86152\AppData\Local\Temp\cczuC29L.s:662    .bss.hspi2:00000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Init
Error_Handler
HAL_GPIO_Init
HAL_DMA_Init
HAL_GPIO_DeInit
HAL_DMA_DeInit
